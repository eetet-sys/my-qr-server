<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <script>
        // 1. 주소창에서 ?id=값 가져오기
        const urlParams = new URLSearchParams(window.location.search);
        const qrId = urlParams.get('id');

        // 2. 장부(db.json)를 가져와서 확인하기
        if (qrId) {
            fetch('db.json')
                .then(response => response.json())
                .then(data => {
                    const targetUrl = data[qrId];
                    if (targetUrl) {
                        // 3. 목적지로 이동!
                        window.location.href = targetUrl;
                    } else {
                        document.body.innerHTML = "<h2>등록되지 않은 QR 코드입니다.</h2>";
                    }
                })
                .catch(error => {
                    document.body.innerHTML = "<h2>데이터를 불러오는 중 오류가 발생했습니다.</h2>";
                });
        } else {
            document.body.innerHTML = "<h2>잘못된 접근입니다. (ID가 없음)</h2>";
        }
    </script>
</head>
<body>
    <p>잠시만 기다려주세요... 연결 중입니다...</p>
</body>
</html>